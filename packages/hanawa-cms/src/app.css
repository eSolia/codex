@import 'tailwindcss';
@plugin "@tailwindcss/typography";

/* eSolia Brand Colors */
@theme {
  --color-esolia-navy: #2d2f63;
  --color-esolia-orange: #ffbc68;
  --color-esolia-cream: #fffad7;
  --color-esolia-emerald: #10b981;
  --color-esolia-sky: #0ea5e9;
  --color-esolia-fuchsia: #d946ef;

  /* Codex/Hanawa Theme - Rose with complementary colors */
  --color-codex-rose: #e11d48;
  --color-codex-rose-light: #fda4af;
  --color-codex-rose-dark: #9f1239;
  --color-codex-bg: #fff1f2;
  --color-codex-surface: #ffe4e6;

  /* Complementary accents for rose */
  --color-accent-slate: #475569;
  --color-accent-zinc: #3f3f46;
  --color-accent-teal: #0d9488;
  --color-accent-amber: #d97706;
}

/* Base styles */
@layer base {
  @font-face {
    font-family: 'IBM Plex Sans';
    font-display: swap;
    src: url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&display=swap');
  }

  body {
    font-family:
      'IBM Plex Sans',
      -apple-system,
      BlinkMacSystemFont,
      sans-serif;
  }

  /* Form element base styles - bits-ui polish */
  input[type='text'],
  input[type='email'],
  input[type='password'],
  input[type='number'],
  input[type='search'],
  input[type='url'],
  input[type='tel'],
  input[type='date'],
  input[type='datetime-local'],
  textarea,
  select {
    @apply px-3 py-2 text-sm bg-white border border-gray-300 rounded-lg;
    @apply placeholder:text-gray-400;
    @apply focus:outline-none focus:ring-2 focus:ring-rose-500/20 focus:border-rose-500;
    @apply disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed;
    @apply transition-colors duration-150;
  }

  /* Checkbox and radio base */
  input[type='checkbox'],
  input[type='radio'] {
    @apply h-4 w-4 rounded border-gray-300 text-rose-600;
    @apply focus:ring-2 focus:ring-rose-500/20 focus:ring-offset-0;
  }

  input[type='radio'] {
    @apply rounded-full;
  }

  /* Select arrow styling */
  select {
    @apply appearance-none bg-no-repeat;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }
}

/* Tiptap editor styles */
.tiptap {
  @apply prose prose-lg max-w-none focus:outline-none;
  min-height: 400px;
  padding: 1rem;
}

.tiptap p.is-editor-empty:first-child::before {
  @apply text-gray-400 pointer-events-none float-left h-0;
  content: attr(data-placeholder);
}

/* Callout styles for editor */
.tiptap .callout {
  @apply p-4 my-4 rounded-lg border-l-4;
}

.tiptap .callout.info {
  @apply bg-blue-50 border-blue-500;
}

.tiptap .callout.warning {
  @apply bg-amber-50 border-amber-500;
}

.tiptap .callout.danger {
  @apply bg-red-50 border-red-500;
}

.tiptap .callout.success {
  @apply bg-emerald-50 border-emerald-500;
}

/* Fragment reference in editor */
.tiptap .fragment-ref {
  @apply inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-mono;
}

/* Status badge in editor */
.tiptap .status-badge {
  @apply inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium;
}

.tiptap .status-badge.compliant {
  @apply bg-emerald-100 text-emerald-800;
}

.tiptap .status-badge.non-compliant {
  @apply bg-red-100 text-red-800;
}

.tiptap .status-badge.in-progress {
  @apply bg-amber-100 text-amber-800;
}

.tiptap .status-badge.pending-review {
  @apply bg-blue-100 text-blue-800;
}

/* Mermaid Block Styles */
.mermaid-block {
  @apply border border-gray-200 rounded-lg my-4 overflow-hidden;
}

.mermaid-block.ProseMirror-selectednode {
  @apply border-esolia-navy ring-2 ring-esolia-navy/20;
}

.mermaid-header {
  @apply flex items-center justify-between px-4 py-2 bg-gray-50 border-b border-gray-200;
}

.mermaid-type-label {
  @apply text-xs font-medium text-gray-500 uppercase tracking-wide;
}

.mermaid-actions {
  @apply flex items-center gap-2;
}

.mermaid-export-btn {
  @apply px-3 py-1 text-xs font-medium text-white bg-esolia-navy border border-esolia-navy rounded hover:bg-esolia-navy/90 transition-colors;
}

.mermaid-export-btn:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.mermaid-edit-btn {
  @apply px-3 py-1 text-xs font-medium text-esolia-navy bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors;
}

.mermaid-status {
  @apply ml-2 px-1.5 py-0.5 text-[10px] font-medium rounded;
}

.mermaid-status-pending {
  @apply bg-amber-100 text-amber-700;
}

.mermaid-status-exported {
  @apply bg-emerald-100 text-emerald-700;
}

.mermaid-delete-btn {
  @apply w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors;
}

.mermaid-diagram {
  @apply p-4 flex items-center justify-center min-h-[200px] bg-white;
}

.mermaid-diagram svg {
  @apply max-w-full h-auto;
}

.mermaid-placeholder {
  @apply text-gray-400 text-sm italic;
}

.mermaid-error {
  @apply mx-4 mb-4 p-3 text-sm text-red-700 bg-red-50 border border-red-200 rounded;
}

.mermaid-success {
  @apply mx-4 mb-4 p-3 text-sm text-emerald-700 bg-emerald-50 border border-emerald-200 rounded;
}

.mermaid-error.hidden,
.mermaid-success.hidden {
  @apply hidden;
}

.mermaid-editor {
  @apply p-4 bg-gray-50 border-t border-gray-200;
}

.mermaid-editor.hidden {
  @apply hidden;
}

.mermaid-label {
  @apply block text-xs font-medium text-gray-600 mb-1;
}

.mermaid-source {
  @apply w-full p-3 font-mono text-sm bg-gray-900 text-gray-100 rounded border-0 resize-y;
  min-height: 150px;
}

.mermaid-source:focus {
  @apply ring-2 ring-esolia-navy outline-none;
}

.mermaid-caption-grid {
  @apply grid grid-cols-2 gap-4 mt-4;
}

.mermaid-caption-group {
  @apply flex flex-col;
}

.mermaid-caption-input {
  @apply w-full px-3 py-2 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-esolia-navy focus:outline-none;
}

.mermaid-save-btn {
  @apply mt-4 px-4 py-2 text-sm font-medium text-white bg-esolia-navy rounded hover:bg-esolia-navy/90 transition-colors;
}

.mermaid-caption-display {
  @apply px-4 pb-3 text-sm text-gray-600 italic text-center;
}

.mermaid-caption-display:empty {
  @apply hidden;
}

/* Page Break styles for editor */
.page-break {
  @apply my-8 py-4 border-t-2 border-b-2 border-dashed border-gray-300 bg-gray-50;
  position: relative;
}

.page-break::before,
.page-break::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background: repeating-linear-gradient(
    90deg,
    transparent,
    transparent 4px,
    #d1d5db 4px,
    #d1d5db 8px
  );
}

.page-break::before {
  top: -2px;
}

.page-break::after {
  bottom: -2px;
}

.page-break-label {
  @apply text-xs text-gray-500 font-medium text-center uppercase tracking-wider;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.page-break-label::before,
.page-break-label::after {
  content: 'âœ‚';
  font-size: 14px;
}

.page-break.ProseMirror-selectednode {
  @apply border-blue-400 bg-blue-50;
}

.page-break.ProseMirror-selectednode .page-break-label {
  @apply text-blue-600;
}

/* Slash Commands Menu Styles */
.slash-menu {
  @apply bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden;
  max-height: 320px;
  overflow-y: auto;
  min-width: 280px;
}

.slash-menu-empty {
  @apply p-4 text-sm text-gray-500 text-center;
}

.slash-menu-item {
  @apply flex items-center gap-3 w-full px-4 py-2.5 text-left transition-colors;
}

.slash-menu-item:hover,
.slash-menu-item.selected {
  @apply bg-gray-100;
}

.slash-menu-icon {
  @apply w-8 h-8 flex items-center justify-center text-lg bg-gray-50 rounded;
}

.slash-menu-content {
  @apply flex flex-col;
}

.slash-menu-title {
  @apply text-sm font-medium text-gray-900;
}

.slash-menu-description {
  @apply text-xs text-gray-500;
}

/* Tippy theme for slash menu */
.tippy-box[data-theme~='slash-menu'] {
  background: transparent;
  padding: 0;
  z-index: 9999 !important;
}

.tippy-box[data-theme~='slash-menu'] > .tippy-content {
  padding: 0;
}

.tippy-box[data-theme~='slash-menu'] > .tippy-arrow {
  display: none;
}

/* Tippy.js base styles (required for popups to work) */
.tippy-box {
  position: relative;
  background-color: #333;
  color: #fff;
  border-radius: 4px;
  font-size: 14px;
  line-height: 1.4;
  white-space: normal;
  outline: 0;
  transition-property: transform, visibility, opacity;
}

.tippy-box[data-placement^='top'] > .tippy-arrow {
  bottom: 0;
}

.tippy-box[data-placement^='bottom'] > .tippy-arrow {
  top: 0;
}

.tippy-box[data-placement^='left'] > .tippy-arrow {
  right: 0;
}

.tippy-box[data-placement^='right'] > .tippy-arrow {
  left: 0;
}

.tippy-arrow {
  width: 16px;
  height: 16px;
  color: #333;
}

.tippy-arrow::before {
  content: '';
  position: absolute;
  border-color: transparent;
  border-style: solid;
}

.tippy-content {
  position: relative;
  padding: 5px 9px;
  z-index: 1;
}
